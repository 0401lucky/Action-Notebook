# 需求文档

## 简介

行动手账 (Action Log) 是一个基于 Vue.js 的任务驱动型日志系统 Web 应用。该应用创造性地将"待办事项管理（RPG任务化）"与"每日心情日记"深度融合，帮助用户提高行动力，养成每日复盘的习惯，将枯燥的日常转化为有成就感的"个人成长史"。

应用采用响应式单页应用 (SPA) 架构，技术栈包括 Vue 3 + Vue Router + Pinia + CSS3 (Flex/Grid)，支持桌面端、平板和手机端的多端适配。

## 术语表

- **行动手账系统**: 本项目的核心应用系统
- **任务**: 待办任务项，包含描述、优先级、标签、完成状态等属性
- **任务列表**: 当日所有待办任务的集合
- **复盘日记**: 用户撰写的当日感想和心情记录
- **每日记录**: 包含当日任务列表和复盘日记的完整数据结构
- **优先级**: 任务优先级，分为高、中、低三个等级
- **标签**: 分类标签，用于任务归类（如：学习、工作、生活）
- **心情**: 心情状态，包括开心、平淡、沮丧等情绪类型
- **历史归档**: 过往手账记录的存储和展示
- **完成率**: 已完成任务数占总任务数的百分比
- **本地存储**: 浏览器 LocalStorage，用于数据持久化

## 需求列表

### 需求 1：任务管理

**用户故事：** 作为用户，我希望能够对每日任务进行完整的增删改查操作，以便有效地规划和追踪我的日常行动。

#### 验收标准

1. 当用户输入任务描述并提交时，行动手账系统应创建新任务并添加到任务列表中
2. 当用户尝试添加空描述的任务时，行动手账系统应拒绝添加并显示验证提示信息
3. 当用户点击任务的删除按钮时，行动手账系统应从任务列表中移除该任务
4. 当用户点击任务的复选框时，行动手账系统应切换任务完成状态并应用视觉反馈（划线动画）
5. 当任务被标记为完成时，行动手账系统应触发完成动画效果

### 需求 2：任务优先级与组织

**用户故事：** 作为用户，我希望能够为任务设置优先级和标签，以便组织任务并优先关注重要事项。

#### 验收标准

1. 当用户创建或编辑任务时，行动手账系统应允许选择优先级（高、中、低）
2. 当任务列表显示任务时，行动手账系统应将高优先级任务置顶并以醒目颜色高亮显示
3. 当用户创建或编辑任务时，行动手账系统应允许分配一个或多个标签
4. 当用户拖拽任务到新位置时，行动手账系统应更新任务顺序并持久化新的排列
5. 当任务列表包含任务时，行动手账系统应支持按标签分组或筛选显示任务

### 需求 3：进度可视化

**用户故事：** 作为用户，我希望能够直观地看到每日进度，以便保持动力并追踪完成率。

#### 验收标准

1. 当任务列表包含任务时，行动手账系统应计算并以百分比形式显示完成率
2. 当完成率变化时，行动手账系统应以平滑动画更新进度条
3. 当任务完成状态改变时，行动手账系统应在100毫秒内重新计算完成率

### 需求 4：日记与心情追踪

**用户故事：** 作为用户，我希望能够撰写每日复盘并追踪心情，以便养成自我反思的习惯。

#### 验收标准

1. 当用户在日记文本区域输入时，行动手账系统应将内容保存到当前每日记录
2. 当用户选择心情图标时，行动手账系统应将选中的心情关联到当前每日记录
3. 当用户点击"封存今日"按钮时，行动手账系统应验证核心任务已完成或日记内容达到最低字数要求
4. 如果封存验证失败，行动手账系统应显示具体的错误信息说明哪些条件未满足
5. 当每日记录被封存时，行动手账系统应将记录标记为已归档并阻止进一步修改

### 需求 5：数据持久化

**用户故事：** 作为用户，我希望数据能够自动保存，以免丢失我的任务和日记内容。

#### 验收标准

1. 当任何数据变更发生（任务或日记）时，行动手账系统应在500毫秒内将数据持久化到本地存储
2. 当应用启动时，行动手账系统应从本地存储加载现有数据并恢复应用状态
3. 当用户请求数据导出时，行动手账系统应生成 JSON 或 Markdown 格式的可下载文件
4. 当导出数据时，行动手账系统应包含所有每日记录及其关联的任务、日记和心情

### 需求 6：统计仪表盘

**用户故事：** 作为用户，我希望查看关于生产力和心情趋势的统计数据，以便了解自己的行为模式。

#### 验收标准

1. 当用户导航到统计视图时，行动手账系统应显示过去7天和30天完成率趋势的折线图
2. 当用户查看统计时，行动手账系统应显示所选时间段内心情分布的饼图
3. 当用户查看统计时，行动手账系统应显示累计完成任务数和连续活跃天数
4. 当用户查看统计时，行动手账系统应显示按标签分组的任务数量和完成率

### 需求 7：历史归档

**用户故事：** 作为用户，我希望能够浏览和搜索过往记录，以便回顾历史并查找特定条目。

#### 验收标准

1. 当用户导航到归档视图时，行动手账系统应以时间轴或卡片布局显示过往的每日记录
2. 当用户点击每日记录卡片时，行动手账系统应导航到详情视图显示当日完整的任务和日记
3. 当用户输入搜索条件（日期范围、心情类型或关键词）时，行动手账系统应筛选并显示匹配的每日记录
4. 当显示归档结果时，行动手账系统应显示包含日期、心情、完成率和日记摘要的预览

### 需求 8：响应式设计

**用户故事：** 作为用户，我希望能够在不同设备上使用应用，以便随时随地访问我的行动手账。

#### 验收标准

1. 当视口宽度超过768像素时，行动手账系统应并排显示任务列表和日记面板
2. 当视口宽度为768像素或更小时，行动手账系统应垂直堆叠任务列表和日记面板
3. 当设备方向或视口大小改变时，行动手账系统应在200毫秒内适配布局且不丢失数据

### 需求 9：主题与用户体验

**用户故事：** 作为用户，我希望能够自定义外观并享受流畅的交互，以便获得愉悦的使用体验。

#### 验收标准

1. 当用户切换主题开关时，行动手账系统应在浅色和深色配色方案之间切换
2. 当主题改变时，行动手账系统应使用 CSS 变量应用新主题而无需页面刷新
3. 当任务被添加或移除时，行动手账系统应使用 Vue Transition 为列表变化添加动画
4. 当在路由之间导航时，行动手账系统应应用平滑的页面过渡动画

### 需求 10：路由与导航

**用户故事：** 作为用户，我希望能够在不同视图之间无缝导航，以便访问应用的所有功能。

#### 验收标准

1. 当应用加载时，行动手账系统应显示首页视图（/home）作为默认路由
2. 当用户点击归档导航链接时，行动手账系统应导航到归档视图（/archive）
3. 当用户选择特定的每日记录时，行动手账系统应导航到详情视图（/detail/:id）并携带正确的记录ID
4. 当用户导航到无效路由时，行动手账系统应重定向到首页或显示404提示
