# è¡ŒåŠ¨æ‰‹å¸ - åˆ†å·¥è®²è§£æ–‡æ¡£

> ä¸‰äººå°ç»„åˆ†å·¥æ¼”ç¤ºæŒ‡å—

---

## å°ç»„æˆå‘˜åˆ†å·¥

| è§’è‰² | å§“å | å­¦å· | åˆ†å·¥ |
|------|------|------|------|
| ç»„é•¿ | è¢å¿—åŸ | 202302150045 | æ¶æ„è®¾è®¡ä¸è¾…åŠ©æ¨¡å—å¼€å‘ |
| ç»„å‘˜ | ç‹ä¿Šæ° | 202302150022 | æ ¸å¿ƒæ¨¡å—å¼€å‘ |
| ç»„å‘˜ | å”å›½è£ | 202302150016 | æ•°æ®å¯è§†åŒ–ä¸è¾…åŠ©æ¨¡å—å¼€å‘ |

---

## ä¸€ã€è¢å¿—åŸ - æ¶æ„è®¾è®¡ä¸è¾…åŠ©æ¨¡å—å¼€å‘

### 1.1 è´Ÿè´£å†…å®¹æ¦‚è¿°

**æ¶æ„è®¾è®¡**ï¼šé¡¹ç›®æ•´ä½“æ¶æ„ã€ç›®å½•ç»“æ„ã€æŠ€æœ¯é€‰å‹
**è¾…åŠ©æ¨¡å—**ï¼šç”¨æˆ·è®¤è¯ã€ä¸ªäººä¸­å¿ƒã€ç•ªèŒ„é’Ÿã€è·¯ç”±é…ç½®

### 1.2 è´Ÿè´£çš„æ–‡ä»¶

```
src/
â”œâ”€â”€ router/index.ts              # è·¯ç”±é…ç½®
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ supabase.ts              # Supabase å®¢æˆ·ç«¯åˆå§‹åŒ–
â”‚   â”œâ”€â”€ auth.ts                  # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ profile.ts               # ç”¨æˆ·èµ„æ–™æœåŠ¡
â”‚   â”œâ”€â”€ avatar.ts                # å¤´åƒä¸Šä¼ æœåŠ¡
â”‚   â””â”€â”€ pomodoro.ts              # ç•ªèŒ„é’ŸæœåŠ¡
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ auth.ts                  # è®¤è¯çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ profile.ts               # ç”¨æˆ·èµ„æ–™çŠ¶æ€
â”‚   â””â”€â”€ pomodoro.ts              # ç•ªèŒ„é’ŸçŠ¶æ€
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ LoginView.vue            # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ ProfileView.vue          # ä¸ªäººä¸­å¿ƒ
â”‚   â””â”€â”€ PomodoroView.vue         # ç•ªèŒ„é’Ÿé¡µé¢
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ auth/                    # è®¤è¯ç»„ä»¶
â”‚   â”œâ”€â”€ profile/                 # ä¸ªäººä¸­å¿ƒç»„ä»¶
â”‚   â””â”€â”€ pomodoro/                # ç•ªèŒ„é’Ÿç»„ä»¶
â””â”€â”€ types/index.ts               # ç±»å‹å®šä¹‰
```

### 1.3 è®²è§£è¦ç‚¹

#### A. é¡¹ç›®æ¶æ„è®¾è®¡ï¼ˆ2åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "æˆ‘è´Ÿè´£é¡¹ç›®çš„æ•´ä½“æ¶æ„è®¾è®¡ã€‚æˆ‘ä»¬é‡‡ç”¨äº†æ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼š
> - **views** æ˜¯é¡µé¢å±‚ï¼Œå¯¹åº”è·¯ç”±
> - **components** æ˜¯ç»„ä»¶å±‚ï¼Œå¯å¤ç”¨çš„ UI é›¶ä»¶
> - **stores** æ˜¯çŠ¶æ€ç®¡ç†å±‚ï¼Œç”¨ Pinia ç®¡ç†å…±äº«æ•°æ®
> - **services** æ˜¯æœåŠ¡å±‚ï¼Œå°è£…æ•°æ®åº“æ“ä½œ
> - **composables** æ˜¯å¯å¤ç”¨çš„é€»è¾‘å‡½æ•°
> - **types** æ˜¯ TypeScript ç±»å‹å®šä¹‰
>
> è¿™ç§åˆ†å±‚è®¾è®¡è®©ä»£ç èŒè´£æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤å’Œå›¢é˜Ÿåä½œã€‚"

**å±•ç¤ºä»£ç **ï¼š`src/types/index.ts`ï¼ˆç±»å‹å®šä¹‰ç¤ºä¾‹ï¼‰

#### B. æŠ€æœ¯é€‰å‹ï¼ˆ1åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "æŠ€æœ¯é€‰å‹æ–¹é¢ï¼š
> - **Vue 3**ï¼šComposition API å†™æ³•ç®€æ´
> - **TypeScript**ï¼šç±»å‹å®‰å…¨ï¼Œç¼–è¯‘æ—¶å‘ç°é”™è¯¯
> - **Vite**ï¼šå¯åŠ¨å¿«ï¼Œçƒ­æ›´æ–°ç§’çº§
> - **Pinia**ï¼šæ¯” Vuex æ›´ç®€æ´
> - **Supabase**ï¼šå¼€æºçš„ BaaSï¼Œå…æ­åç«¯"

#### C. ç”¨æˆ·è®¤è¯æ¨¡å—ï¼ˆ2åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "ç”¨æˆ·è®¤è¯ä½¿ç”¨ Supabase çš„ Magic Link æŠ€æœ¯ã€‚ç”¨æˆ·è¾“å…¥é‚®ç®±åï¼Œä¼šæ”¶åˆ°ä¸€å°ç™»å½•é“¾æ¥é‚®ä»¶ï¼Œç‚¹å‡»å³å¯ç™»å½•ï¼Œæ— éœ€è®°ä½å¯†ç ã€‚è¿™ç§æ–¹å¼æ›´å®‰å…¨ï¼Œå› ä¸ºæ²¡æœ‰å¯†ç å¯ä»¥æ³„éœ²ã€‚"

**å±•ç¤ºä»£ç **ï¼š`src/services/auth.ts`
```typescript
// å‘é€ Magic Link
const { error } = await supabase.auth.signInWithOtp({
  email: email.trim(),
  options: {
    shouldCreateUser: true,  // æ–°ç”¨æˆ·è‡ªåŠ¨æ³¨å†Œ
    emailRedirectTo: window.location.origin
  }
})
```

**å±•ç¤ºä»£ç **ï¼š`src/router/index.ts`ï¼ˆè·¯ç”±å®ˆå«ï¼‰
```typescript
// æœªç™»å½•ç”¨æˆ·è®¿é—®å—ä¿æŠ¤é¡µé¢ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µ
router.beforeEach((to, from, next) => {
  if (to.meta.requiresAuth && !isAuthenticated) {
    next('/login')
  }
})
```

#### D. ç•ªèŒ„é’Ÿæ¨¡å—ï¼ˆ1åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "ç•ªèŒ„é’Ÿå®ç°äº†æ ‡å‡†çš„ç•ªèŒ„å·¥ä½œæ³•ï¼š25åˆ†é’Ÿä¸“æ³¨ + 5åˆ†é’Ÿä¼‘æ¯ã€‚å¯ä»¥å…³è”å…·ä½“ä»»åŠ¡ï¼Œä¸“æ³¨å®Œæˆåè‡ªåŠ¨ä¿å­˜è®°å½•åˆ°æ•°æ®åº“ã€‚"

**å±•ç¤ºä»£ç **ï¼š`src/stores/pomodoro.ts`
```typescript
// è®¡æ—¶å™¨æ ¸å¿ƒé€»è¾‘
timerInterval = setInterval(() => {
  if (timeLeft.value > 0) {
    timeLeft.value--
  } else {
    handleTimerComplete()  // æ—¶é—´åˆ°ï¼Œä¿å­˜è®°å½•
  }
}, 1000)
```

#### E. ä¸ªäººä¸­å¿ƒæ¨¡å—ï¼ˆ1åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "ä¸ªäººä¸­å¿ƒé‡‡ç”¨äº†æ‰‹å¸é£æ ¼è®¾è®¡ï¼Œæœ‰èƒ¶å¸¦è£…é¥°å’Œè´´çº¸å…ƒç´ ã€‚ç”¨æˆ·å¯ä»¥ä¸Šä¼ å¤´åƒã€ä¿®æ”¹æ˜µç§°ï¼Œè¿˜èƒ½çœ‹åˆ°ç»Ÿè®¡å¾½ç« ã€‚å¤´åƒä¸Šä¼ æœ‰æ ¼å¼å’Œå¤§å°é™åˆ¶ï¼Œä¿è¯å®‰å…¨ã€‚"

**å±•ç¤ºä»£ç **ï¼š`src/services/avatar.ts`
```typescript
// å¤´åƒéªŒè¯
const validTypes = ['image/jpeg', 'image/png']
const maxSize = 5 * 1024 * 1024  // 5MB
```

---

## äºŒã€ç‹ä¿Šæ° - æ ¸å¿ƒæ¨¡å—å¼€å‘

### 2.1 è´Ÿè´£å†…å®¹æ¦‚è¿°

**æ ¸å¿ƒæ¨¡å—**ï¼šä»»åŠ¡ç®¡ç†ã€æ—¥è®°ç³»ç»Ÿã€å°å­˜æœºåˆ¶ã€å½’æ¡£åŠŸèƒ½
**è¿™æ˜¯é¡¹ç›®æœ€æ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘éƒ¨åˆ†**

### 2.2 è´Ÿè´£çš„æ–‡ä»¶

```
src/
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ daily.ts                 # ä»Šæ—¥æ•°æ®ï¼ˆæœ€æ ¸å¿ƒï¼ï¼‰
â”‚   â””â”€â”€ archive.ts               # å½’æ¡£æ•°æ®
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ database.ts              # æ•°æ®åº“ CRUD
â”‚   â”œâ”€â”€ storage.ts               # ç»Ÿä¸€å­˜å‚¨æ¥å£
â”‚   â”œâ”€â”€ journal.ts               # æ—¥è®°æ¡ç›®æœåŠ¡
â”‚   â”œâ”€â”€ seal.ts                  # è§£å°æœåŠ¡
â”‚   â””â”€â”€ bookshelf.ts             # æ—¥è®°æœ¬ä¹¦æ¶
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ HomeView.vue             # ä»Šæ—¥è§†å›¾ï¼ˆæ ¸å¿ƒé¡µé¢ï¼‰
â”‚   â”œâ”€â”€ ArchiveView.vue          # å½’æ¡£åˆ—è¡¨
â”‚   â””â”€â”€ DetailView.vue           # å½’æ¡£è¯¦æƒ…
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ task/                    # ä»»åŠ¡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TaskInput.vue        # ä»»åŠ¡è¾“å…¥
â”‚   â”‚   â”œâ”€â”€ TaskItem.vue         # ä»»åŠ¡é¡¹
â”‚   â”‚   â”œâ”€â”€ TaskList.vue         # ä»»åŠ¡åˆ—è¡¨ï¼ˆå«æ‹–æ‹½ï¼‰
â”‚   â”‚   â””â”€â”€ ProgressBar.vue      # è¿›åº¦æ¡
â”‚   â”œâ”€â”€ journal/                 # æ—¥è®°ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ JournalEditor.vue    # æ—¥è®°ç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ RichTextEditor.vue   # å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ MoodPicker.vue       # å¿ƒæƒ…é€‰æ‹©å™¨
â”‚   â”‚   â”œâ”€â”€ SealButton.vue       # å°å­˜æŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ JournalEntryList.vue # æ—¥è®°æ¡ç›®åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ JournalBookshelf.vue # æ—¥è®°æœ¬ä¹¦æ¶
â”‚   â””â”€â”€ archive/                 # å½’æ¡£ç»„ä»¶
â”‚       â”œâ”€â”€ ArchiveCard.vue      # å½’æ¡£å¡ç‰‡
â”‚       â””â”€â”€ SearchFilter.vue     # æœç´¢ç­›é€‰
â”œâ”€â”€ composables/
â”‚   â”œâ”€â”€ useRichTextEditor.ts     # å¯Œæ–‡æœ¬ç¼–è¾‘å™¨é€»è¾‘
â”‚   â””â”€â”€ useAutoSave.ts           # è‡ªåŠ¨ä¿å­˜é€»è¾‘
â””â”€â”€ supabase/migrations/         # æ•°æ®åº“è¿ç§»æ–‡ä»¶
```

### 2.3 è®²è§£è¦ç‚¹

#### A. ä»»åŠ¡ç®¡ç†æ¨¡å—ï¼ˆ2åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "ä»»åŠ¡ç®¡ç†æ˜¯æ ¸å¿ƒåŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥æ·»åŠ ä»»åŠ¡ã€è®¾ç½®ä¼˜å…ˆçº§ã€æ‰“æ ‡ç­¾ã€‚ä»»åŠ¡æ”¯æŒæ‹–æ‹½æ’åºï¼Œä½¿ç”¨ vuedraggable åº“å®ç°ã€‚å®Œæˆç‡æ˜¯å®æ—¶è®¡ç®—çš„ï¼Œå…¬å¼æ˜¯ï¼šå·²å®Œæˆæ•° / æ€»æ•° Ã— 100ã€‚"

**å±•ç¤ºä»£ç **ï¼š`src/stores/daily.ts:122-129`ï¼ˆå®Œæˆç‡è®¡ç®—ï¼‰
```typescript
const completionRate = computed(() => {
  if (!currentRecord.value || currentRecord.value.tasks.length === 0) {
    return 0
  }
  const total = currentRecord.value.tasks.length
  const completed = currentRecord.value.tasks.filter(t => t.completed).length
  return Math.round((completed / total) * 100)
})
```

**å±•ç¤ºä»£ç **ï¼š`src/components/task/TaskList.vue:39-67`ï¼ˆæ‹–æ‹½æ’åºï¼‰
```typescript
<draggable
  v-model="localTasks"
  item-key="id"
  :animation="200"
  @end="handleDragEnd"
>
```

#### B. æ—¥è®°ç³»ç»Ÿï¼ˆ2åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "æ—¥è®°ç³»ç»Ÿæœ‰ä¸¤ä¸ªåˆ›æ–°ç‚¹ï¼š
> 1. **å¤šæ¡ç›®æ—¥è®°**ï¼šä¸€å¤©å¯ä»¥å†™å¤šæ¡æ—¥è®°ï¼Œæ¯æ¡æœ‰ç‹¬ç«‹æ—¶é—´æˆ³å’Œå¿ƒæƒ…
> 2. **å¯Œæ–‡æœ¬ç¼–è¾‘**ï¼šä½¿ç”¨ Tiptap ç¼–è¾‘å™¨ï¼Œæ”¯æŒåŠ ç²—ã€åˆ—è¡¨ã€å¼•ç”¨ç­‰æ ¼å¼"

**å±•ç¤ºä»£ç **ï¼š`src/stores/daily.ts:69-91`ï¼ˆæ•°æ®è¿ç§»ï¼‰
```typescript
// æ—§æ•°æ®è‡ªåŠ¨å‡çº§ä¸ºæ–°æ ¼å¼
if (record.journal && record.journalEntries.length === 0) {
  record.journalEntries = [{
    id: generateUUID(),
    content: record.journal,
    mood: record.mood,
    createdAt: record.createdAt
  }]
}
```

**å±•ç¤ºä»£ç **ï¼š`src/composables/useRichTextEditor.ts`ï¼ˆå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰
```typescript
editor.value = new Editor({
  extensions: [
    StarterKit,  // åŸºç¡€åŠŸèƒ½åŒ…
    Placeholder.configure({ placeholder }),
    TextStyle,
    FontSize
  ]
})
```

#### C. å°å­˜æœºåˆ¶ï¼ˆ1åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "å°å­˜æ˜¯'æ—¶é—´èƒ¶å›Š'æ¦‚å¿µã€‚å°å­˜æ¡ä»¶åˆ†ä¸¤ç§ï¼š
> - æœ‰ä»»åŠ¡æ—¶ï¼šå…¨éƒ¨å®Œæˆ OR æ—¥è®°â‰¥50å­— OR æœ‰æ—¥è®°æ¡ç›®
> - æ— ä»»åŠ¡æ—¶ï¼šæœ‰æ—¥è®° OR æœ‰å¿ƒæƒ… OR æœ‰æ—¥è®°æ¡ç›®
>
> å°å­˜åå†…å®¹å˜ä¸ºåªè¯»ï¼Œä½†å¯ä»¥è§£å°ä¿®æ”¹ã€‚"

**å±•ç¤ºä»£ç **ï¼š`src/stores/daily.ts:131-152`ï¼ˆå°å­˜æ¡ä»¶ï¼‰
```typescript
if (hasTasks) {
  return allTasksCompleted || journalMeetsMinLength || hasJournalEntries
} else {
  return hasJournalContent || hasMood || hasJournalEntries
}
```

#### D. æ•°æ®åº“æ“ä½œï¼ˆ1åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "æ•°æ®åº“ä½¿ç”¨ Supabase çš„ PostgreSQLã€‚æ‰€æœ‰è¡¨éƒ½å¯ç”¨äº† RLSï¼ˆRow Level Securityï¼‰ï¼Œåœ¨æ•°æ®åº“å±‚é¢å°±ä¿è¯ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®ã€‚"

**å±•ç¤ºä»£ç **ï¼š`src/services/database.ts`
```typescript
// ä¿å­˜è®°å½•æ—¶è‡ªåŠ¨å…³è”ç”¨æˆ·
await supabase.from('daily_records').upsert({
  ...record,
  user_id: userId  // RLS ä¼šéªŒè¯è¿™ä¸ªå­—æ®µ
})
```

---

## ä¸‰ã€å”å›½è£ - æ•°æ®å¯è§†åŒ–ä¸è¾…åŠ©æ¨¡å—å¼€å‘

### 3.1 è´Ÿè´£å†…å®¹æ¦‚è¿°

**æ•°æ®å¯è§†åŒ–**ï¼šç»Ÿè®¡å›¾è¡¨ã€ä»ªè¡¨ç›˜
**è¾…åŠ©æ¨¡å—**ï¼šéª¨æ¶å±ã€ç©ºçŠ¶æ€ã€è™šæ‹Ÿæ»šåŠ¨ã€ä¸»é¢˜åˆ‡æ¢ã€åŠ¨ç”»æ•ˆæœ

### 3.2 è´Ÿè´£çš„æ–‡ä»¶

```
src/
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ DashboardView.vue        # ä»ªè¡¨ç›˜
â”‚   â””â”€â”€ StatsView.vue            # ç»Ÿè®¡é¡µé¢
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ stats.ts                 # ç»Ÿè®¡è®¡ç®—æœåŠ¡
â”‚   â”œâ”€â”€ dashboard.ts             # ä»ªè¡¨ç›˜æ•°æ®æœåŠ¡
â”‚   â””â”€â”€ export.ts                # æ•°æ®å¯¼å‡º
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ settings.ts              # åº”ç”¨è®¾ç½®ï¼ˆä¸»é¢˜ç­‰ï¼‰
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ dashboard/               # ä»ªè¡¨ç›˜ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ WelcomeHeader.vue    # æ¬¢è¿åŒºåŸŸ
â”‚   â”‚   â”œâ”€â”€ TaskCard.vue         # ä»»åŠ¡å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ JournalCard.vue      # æ—¥è®°å¡ç‰‡
â”‚   â”‚   â””â”€â”€ StatsCard.vue        # ç»Ÿè®¡å¡ç‰‡
â”‚   â”œâ”€â”€ stats/                   # ç»Ÿè®¡å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ CompletionChart.vue  # å®Œæˆç‡æŠ˜çº¿å›¾
â”‚   â”‚   â”œâ”€â”€ MoodChart.vue        # å¿ƒæƒ…é¥¼å›¾
â”‚   â”‚   â””â”€â”€ TagStats.vue         # æ ‡ç­¾ç»Ÿè®¡
â”‚   â”œâ”€â”€ skeleton/                # éª¨æ¶å±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SkeletonLoader.vue   # éª¨æ¶å±åŠ è½½å™¨
â”‚   â”‚   â””â”€â”€ SkeletonCard.vue     # éª¨æ¶å±å¡ç‰‡
â”‚   â””â”€â”€ common/                  # é€šç”¨ç»„ä»¶
â”‚       â”œâ”€â”€ EmptyState.vue       # ç©ºçŠ¶æ€
â”‚       â”œâ”€â”€ LoadingSpinner.vue   # åŠ è½½åŠ¨ç”»
â”‚       â”œâ”€â”€ VirtualList.vue      # è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨
â”‚       â”œâ”€â”€ AppHeader.vue        # é¡¶éƒ¨å¯¼èˆª
â”‚       â””â”€â”€ ConfirmDialog.vue    # ç¡®è®¤å¯¹è¯æ¡†
â”œâ”€â”€ composables/
â”‚   â”œâ”€â”€ useVirtualScroll.ts      # è™šæ‹Ÿæ»šåŠ¨é€»è¾‘
â”‚   â”œâ”€â”€ useTheme.ts              # ä¸»é¢˜åˆ‡æ¢é€»è¾‘
â”‚   â””â”€â”€ useAnimation.ts          # åŠ¨ç”»æ•ˆæœé€»è¾‘
â””â”€â”€ assets/styles/               # æ ·å¼æ–‡ä»¶
    â”œâ”€â”€ variables.scss           # CSS å˜é‡
    â”œâ”€â”€ main.scss                # ä¸»æ ·å¼
    â”œâ”€â”€ transitions.scss         # è¿‡æ¸¡åŠ¨ç”»
    â””â”€â”€ responsive.scss          # å“åº”å¼å¸ƒå±€
```

### 3.3 è®²è§£è¦ç‚¹

#### A. æ•°æ®ç»Ÿè®¡ä¸å¯è§†åŒ–ï¼ˆ2åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "ç»Ÿè®¡é¡µé¢ä½¿ç”¨ ECharts å®ç°æ•°æ®å¯è§†åŒ–ï¼š
> - **æŠ˜çº¿å›¾**ï¼šå±•ç¤ºæœ€è¿‘ 7 å¤©çš„ä»»åŠ¡å®Œæˆç‡è¶‹åŠ¿
> - **é¥¼å›¾**ï¼šå±•ç¤ºå¿ƒæƒ…åˆ†å¸ƒæ¯”ä¾‹
> - **æ ‡ç­¾ç»Ÿè®¡**ï¼šå±•ç¤ºå„æ ‡ç­¾ä½¿ç”¨é¢‘ç‡
>
> è¿™äº›æ•°æ®å¸®åŠ©ç”¨æˆ·äº†è§£è‡ªå·±çš„æˆé•¿è½¨è¿¹ã€‚"

**å±•ç¤ºä»£ç **ï¼š`src/services/stats.ts`
```typescript
// è®¡ç®—è¿ç»­æ‰“å¡å¤©æ•°
export function calculateConsecutiveDays(records: DailyRecord[]): number {
  let consecutiveDays = 0
  let expectedDate = getTodayDateString()
  
  for (const record of sortedRecords) {
    if (record.date === expectedDate) {
      consecutiveDays++
      expectedDate = subtractDays(expectedDate, 1)
    } else {
      break  // ä¸­æ–­
    }
  }
  return consecutiveDays
}
```

**å±•ç¤ºä»£ç **ï¼š`src/components/stats/CompletionChart.vue`
```typescript
// ECharts é…ç½®
const option = {
  xAxis: { type: 'category', data: dates },
  yAxis: { type: 'value', max: 100 },
  series: [{
    type: 'line',
    data: rates,
    smooth: true
  }]
}
```

#### B. ä»ªè¡¨ç›˜æ¨¡å—ï¼ˆ1åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "ä»ªè¡¨ç›˜æ˜¯ç™»å½•åçš„é¦–é¡µï¼Œå±•ç¤ºå…¨å±€æ¦‚è§ˆï¼š
> - ä¸ªæ€§åŒ–é—®å€™è¯­ï¼ˆæ—©ä¸Šå¥½/ä¸‹åˆå¥½/æ™šä¸Šå¥½ï¼‰
> - ä»Šæ—¥ä»»åŠ¡å¿«é€Ÿé¢„è§ˆ
> - æœ€è¿‘æ—¥è®°æ‘˜è¦
> - å…³é”®ç»Ÿè®¡æ•°æ®"

**å±•ç¤ºä»£ç **ï¼š`src/components/dashboard/WelcomeHeader.vue`
```typescript
// æ ¹æ®æ—¶é—´æ˜¾ç¤ºé—®å€™è¯­
const greeting = computed(() => {
  const hour = new Date().getHours()
  if (hour < 12) return 'æ—©ä¸Šå¥½'
  if (hour < 18) return 'ä¸‹åˆå¥½'
  return 'æ™šä¸Šå¥½'
})
```

#### C. æ€§èƒ½ä¼˜åŒ– - è™šæ‹Ÿæ»šåŠ¨ï¼ˆ2åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "è™šæ‹Ÿæ»šåŠ¨æ˜¯æ€§èƒ½ä¼˜åŒ–çš„å…³é”®æŠ€æœ¯ã€‚å‡è®¾å½’æ¡£åˆ—è¡¨æœ‰ 1000 æ¡è®°å½•ï¼Œå¦‚æœå…¨éƒ¨æ¸²æŸ“ä¼šå¾ˆå¡ã€‚è™šæ‹Ÿæ»šåŠ¨åªæ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„é¡¹ç›®ï¼Œæ¯”å¦‚å±å¹•èƒ½æ˜¾ç¤º 10 æ¡ï¼ŒåŠ ä¸Šç¼“å†²åŒº 10 æ¡ï¼Œæ€»å…±åªæ¸²æŸ“ 20 æ¡ DOM å…ƒç´ ã€‚"

**å±•ç¤ºä»£ç **ï¼š`src/composables/useVirtualScroll.ts`
```typescript
// è®¡ç®—å¯è§†èŒƒå›´
const visibleItems = computed(() => {
  const { startIndex, endIndex } = calculateVisibleRange(
    items.value,
    itemHeight,
    scrollTop.value,
    containerHeight.value,
    bufferSize  // ç¼“å†²åŒºå¤§å°ï¼Œé»˜è®¤ 5
  )
  // åªè¿”å›å¯è§†èŒƒå›´å†…çš„é¡¹ç›®
  return items.value.slice(startIndex, endIndex)
})
```

#### D. ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼ˆ1åˆ†é’Ÿï¼‰

**è¯æœ¯**ï¼š
> "ç”¨æˆ·ä½“éªŒæ–¹é¢åšäº†å‡ ä¸ªä¼˜åŒ–ï¼š
> - **éª¨æ¶å±**ï¼šæ•°æ®åŠ è½½æ—¶æ˜¾ç¤ºå ä½ç¬¦ï¼Œå‡å°‘æ„ŸçŸ¥ç­‰å¾…
> - **ç©ºçŠ¶æ€**ï¼šåˆ—è¡¨ä¸ºç©ºæ—¶æ˜¾ç¤ºå‹å¥½æç¤º
> - **å¾®äº¤äº’åŠ¨ç”»**ï¼šä»»åŠ¡å‹¾é€‰ã€æ·»åŠ åˆ é™¤éƒ½æœ‰åŠ¨ç”»åé¦ˆ
> - **ä¸»é¢˜åˆ‡æ¢**ï¼šæ”¯æŒæ·±è‰²/æµ…è‰²æ¨¡å¼"

**å±•ç¤ºä»£ç **ï¼š`src/composables/useTheme.ts`
```typescript
// ä¸»é¢˜åˆ‡æ¢
function toggleTheme() {
  isDark.value = !isDark.value
  document.documentElement.setAttribute('data-theme', isDark.value ? 'dark' : 'light')
  localStorage.setItem('theme', isDark.value ? 'dark' : 'light')
}
```

**å±•ç¤ºä»£ç **ï¼š`src/components/common/EmptyState.vue`
```vue
<template>
  <div class="empty-state">
    <span class="empty-state__icon">{{ icon }}</span>
    <p class="empty-state__title">{{ title }}</p>
    <p class="empty-state__description">{{ description }}</p>
  </div>
</template>
```

---

## å››ã€æ¼”ç¤ºæµç¨‹å»ºè®®

### 4.1 æ¼”ç¤ºé¡ºåºï¼ˆæ€»æ—¶é•¿ 10-12 åˆ†é’Ÿï¼‰

| é¡ºåº | å†…å®¹ | è´Ÿè´£äºº | æ—¶é•¿ |
|------|------|--------|------|
| 1 | é¡¹ç›®ä»‹ç» + æŠ€æœ¯æ¶æ„ | è¢å¿—åŸ | 2åˆ†é’Ÿ |
| 2 | ç™»å½•æ¼”ç¤º | è¢å¿—åŸ | 1åˆ†é’Ÿ |
| 3 | ä»ªè¡¨ç›˜å±•ç¤º | å”å›½è£ | 1åˆ†é’Ÿ |
| 4 | ä»Šæ—¥è§†å›¾ï¼ˆä»»åŠ¡+æ—¥è®°+å°å­˜ï¼‰ | ç‹ä¿Šæ° | 3åˆ†é’Ÿ |
| 5 | ç•ªèŒ„é’Ÿæ¼”ç¤º | è¢å¿—åŸ | 1åˆ†é’Ÿ |
| 6 | å½’æ¡£ä¸æœç´¢ | ç‹ä¿Šæ° | 1åˆ†é’Ÿ |
| 7 | æ•°æ®ç»Ÿè®¡ | å”å›½è£ | 1åˆ†é’Ÿ |
| 8 | ä¸ªäººä¸­å¿ƒ | è¢å¿—åŸ | 30ç§’ |
| 9 | æŠ€æœ¯äº®ç‚¹æ€»ç»“ | ä¸‰äººå„è¯´ä¸€ç‚¹ | 1åˆ†é’Ÿ |

### 4.2 æŠ€æœ¯äº®ç‚¹æ€»ç»“è¯æœ¯

**è¢å¿—åŸï¼ˆæ¶æ„ï¼‰**ï¼š
> "æ¶æ„æ–¹é¢ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†æ¸…æ™°çš„åˆ†å±‚è®¾è®¡ï¼ŒView â†’ Store â†’ Service â†’ Databaseï¼Œä»£ç èŒè´£æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤ã€‚å®‰å…¨æ–¹é¢ï¼Œä½¿ç”¨ RLS ç­–ç•¥åœ¨æ•°æ®åº“å±‚é¢ä¿æŠ¤ç”¨æˆ·æ•°æ®ã€‚"

**ç‹ä¿Šæ°ï¼ˆæ ¸å¿ƒï¼‰**ï¼š
> "æ ¸å¿ƒåŠŸèƒ½æ–¹é¢ï¼Œæˆ‘ä»¬å®ç°äº†å¤šæ¡ç›®æ—¥è®°ç³»ç»Ÿã€å¯Œæ–‡æœ¬ç¼–è¾‘ã€æ‹–æ‹½æ’åºã€å°å­˜æœºåˆ¶ç­‰ã€‚æ•°æ®è¿ç§»é€»è¾‘ä¿è¯äº†æ—§æ•°æ®è‡ªåŠ¨å‡çº§ï¼Œå‘åå…¼å®¹ã€‚"

**å”å›½è£ï¼ˆå¯è§†åŒ–ï¼‰**ï¼š
> "ç”¨æˆ·ä½“éªŒæ–¹é¢ï¼Œæˆ‘ä»¬åšäº†è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–é•¿åˆ—è¡¨æ€§èƒ½ã€éª¨æ¶å±å‡å°‘æ„ŸçŸ¥ç­‰å¾…ã€å¾®äº¤äº’åŠ¨ç”»æå‡æ“ä½œåé¦ˆã€‚ç»Ÿè®¡å›¾è¡¨å¸®åŠ©ç”¨æˆ·äº†è§£è‡ªå·±çš„æˆé•¿è½¨è¿¹ã€‚"

---

## äº”ã€å¯èƒ½çš„æé—®åŠåˆ†å·¥å›ç­”

### Q1ï¼šä¸ºä»€ä¹ˆé€‰æ‹© Vue 3ï¼Ÿï¼ˆè¢å¿—åŸå›ç­”ï¼‰
> "Vue 3 çš„ Composition API å†™æ³•ç®€æ´ï¼Œå“åº”å¼ç³»ç»Ÿæ€§èƒ½å¥½ï¼ŒTypeScript æ”¯æŒå®Œå–„ï¼Œé€‚åˆä¸­å°å‹é¡¹ç›®å¿«é€Ÿå¼€å‘ã€‚"

### Q2ï¼šå¦‚ä½•ä¿è¯æ•°æ®å®‰å…¨ï¼Ÿï¼ˆè¢å¿—åŸå›ç­”ï¼‰
> "ä¸‰å±‚ä¿æŠ¤ï¼šSupabase Auth ç®¡ç†è®¤è¯ã€RLS ç­–ç•¥åœ¨æ•°æ®åº“å±‚é¢éš”ç¦»æ•°æ®ã€å¤´åƒä¸Šä¼ æœ‰æ ¼å¼å’Œå¤§å°é™åˆ¶ã€‚"

### Q3ï¼šå°å­˜æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆç‹ä¿Šæ°å›ç­”ï¼‰
> "æœ‰ä»»åŠ¡æ—¶ï¼šå…¨éƒ¨å®Œæˆ OR æ—¥è®°â‰¥50å­— OR æœ‰æ—¥è®°æ¡ç›®ã€‚æ— ä»»åŠ¡æ—¶ï¼šæœ‰æ—¥è®° OR æœ‰å¿ƒæƒ… OR æœ‰æ—¥è®°æ¡ç›®ã€‚"

### Q4ï¼šå¤šæ¡ç›®æ—¥è®°æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆç‹ä¿Šæ°å›ç­”ï¼‰
> "ç‹¬ç«‹çš„ journal_entries è¡¨ï¼Œæ¯æ¡æ—¥è®°æ˜¯ä¸€æ¡è®°å½•ã€‚æ—§æ•°æ®é€šè¿‡è¿ç§»å‡½æ•°è‡ªåŠ¨å‡çº§ä¸ºæ–°æ ¼å¼ã€‚"

### Q5ï¼šæ€§èƒ½ä¼˜åŒ–åšäº†ä»€ä¹ˆï¼Ÿï¼ˆå”å›½è£å›ç­”ï¼‰
> "è™šæ‹Ÿæ»šåŠ¨å¤„ç†é•¿åˆ—è¡¨ã€æ‰¹é‡æ›´æ–°å‡å°‘å“åº”å¼è§¦å‘ã€é˜²æŠ–å‡å°‘ç½‘ç»œè¯·æ±‚ã€è·¯ç”±æ‡’åŠ è½½å‡å°é¦–å±ä½“ç§¯ã€‚"

### Q6ï¼šç»Ÿè®¡æ•°æ®æ€ä¹ˆè®¡ç®—çš„ï¼Ÿï¼ˆå”å›½è£å›ç­”ï¼‰
> "å®Œæˆç‡æ˜¯å·²å®Œæˆæ•°é™¤ä»¥æ€»æ•°ã€‚è¿ç»­æ‰“å¡æ˜¯ä»ä»Šå¤©å¾€å‰æ•°ï¼Œæ¯å¤©éƒ½æœ‰å°å­˜è®°å½•å°±åŠ ä¸€ï¼Œä¸­æ–­å°±åœæ­¢ã€‚"

### Q7ï¼šæ‹–æ‹½æ’åºæ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆç‹ä¿Šæ°å›ç­”ï¼‰
> "ä½¿ç”¨ vuedraggable åº“ï¼Œå®ƒæ˜¯ Sortable.js çš„ Vue å°è£…ã€‚æ‹–æ‹½ç»“æŸåç»™æ¯ä¸ªä»»åŠ¡é‡æ–°åˆ†é… order å€¼ï¼Œä¿å­˜åˆ°æ•°æ®åº“ã€‚"

### Q8ï¼šå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç”¨çš„ä»€ä¹ˆï¼Ÿï¼ˆç‹ä¿Šæ°å›ç­”ï¼‰
> "ä½¿ç”¨ Tiptap ç¼–è¾‘å™¨ï¼Œå®ƒæ˜¯ ProseMirror çš„ Vue å°è£…ã€‚é€šè¿‡ StarterKit æ‰©å±•åŒ…æä¾›åŠ ç²—ã€æ–œä½“ã€åˆ—è¡¨ç­‰åŠŸèƒ½ã€‚"

---

## å…­ã€ä»£ç ä½ç½®é€ŸæŸ¥è¡¨

### è¢å¿—åŸè´Ÿè´£çš„ä»£ç 
| åŠŸèƒ½ | æ–‡ä»¶ |
|------|------|
| è·¯ç”±é…ç½® | `src/router/index.ts` |
| è®¤è¯æœåŠ¡ | `src/services/auth.ts` |
| è®¤è¯çŠ¶æ€ | `src/stores/auth.ts` |
| ç•ªèŒ„é’ŸçŠ¶æ€ | `src/stores/pomodoro.ts` |
| ç±»å‹å®šä¹‰ | `src/types/index.ts` |
| ç™»å½•é¡µ | `src/views/LoginView.vue` |
| ä¸ªäººä¸­å¿ƒ | `src/views/ProfileView.vue` |
| ç•ªèŒ„é’Ÿé¡µ | `src/views/PomodoroView.vue` |

### ç‹ä¿Šæ°è´Ÿè´£çš„ä»£ç 
| åŠŸèƒ½ | æ–‡ä»¶ | è¡Œå· |
|------|------|------|
| å®Œæˆç‡è®¡ç®— | `src/stores/daily.ts` | 122-129 |
| å°å­˜æ¡ä»¶ | `src/stores/daily.ts` | 131-152 |
| æ•°æ®è¿ç§» | `src/stores/daily.ts` | 69-91 |
| å¤šæ¡ç›®æ—¥è®° | `src/stores/daily.ts` | 337-437 |
| æ‹–æ‹½æ’åº | `src/components/task/TaskList.vue` | 39-67 |
| å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ | `src/composables/useRichTextEditor.ts` | å…¨æ–‡ä»¶ |
| æ•°æ®åº“æ“ä½œ | `src/services/database.ts` | å…¨æ–‡ä»¶ |
| ä»Šæ—¥è§†å›¾ | `src/views/HomeView.vue` | å…¨æ–‡ä»¶ |

### å”å›½è£è´Ÿè´£çš„ä»£ç 
| åŠŸèƒ½ | æ–‡ä»¶ |
|------|------|
| è™šæ‹Ÿæ»šåŠ¨ | `src/composables/useVirtualScroll.ts` |
| ä¸»é¢˜åˆ‡æ¢ | `src/composables/useTheme.ts` |
| ç»Ÿè®¡è®¡ç®— | `src/services/stats.ts` |
| ä»ªè¡¨ç›˜æ•°æ® | `src/services/dashboard.ts` |
| å®Œæˆç‡å›¾è¡¨ | `src/components/stats/CompletionChart.vue` |
| å¿ƒæƒ…å›¾è¡¨ | `src/components/stats/MoodChart.vue` |
| éª¨æ¶å± | `src/components/skeleton/SkeletonLoader.vue` |
| ç©ºçŠ¶æ€ | `src/components/common/EmptyState.vue` |
| ä»ªè¡¨ç›˜é¡µ | `src/views/DashboardView.vue` |
| ç»Ÿè®¡é¡µ | `src/views/StatsView.vue` |

---

**ç¥æ¼”ç¤ºé¡ºåˆ©ï¼** ğŸ‰
