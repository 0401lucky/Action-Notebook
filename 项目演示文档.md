# 行动手帐 - 项目演示文档

> 课程：Web开发技术课程设计
> 演示日期：2025年12月
> 项目类型：基于 Vue 3 + Supabase 的现代化 Web 应用

---

## 一、项目概述

### 1.1 项目背景

**行动手帐**是一款融合任务管理、日记记录和时间管理的 Web 应用，旨在帮助用户：
- 高效管理每日任务，提升工作效率
- 记录生活点滴，留存美好瞬间
- 通过番茄工作法提升专注力
- 通过数据统计了解自己的成长轨迹

### 1.2 核心价值

- **一体化管理**：任务、日记、番茄钟三合一，减少工具切换成本
- **封存机制**：每日完成后可封存记录，形成时间胶囊
- **手帐风格**：温馨的视觉设计，让记录成为一种享受
- **数据洞察**：通过图表展示个人成长数据

### 1.3 技术特色

- **现代化前端架构**：Vue 3 + TypeScript + Vite
- **无服务器后端**：Supabase BaaS（Backend as a Service）
- **响应式设计**：支持桌面和移动端访问
- **玻璃拟态设计**：现代化的视觉风格

---

## 二、功能演示流程

### 2.1 用户认证（Magic Link 登录）

**演示步骤：**
1. 打开应用，进入登录页面
2. 输入邮箱地址（例如：example@example.com）
3. 点击"发送验证链接"按钮
4. 系统发送 Magic Link 到邮箱
5. 点击邮件中的链接，自动登录

**技术亮点：**
- 无需密码，安全便捷
- 基于 Supabase Auth 实现
- 支持会话持久化，7天免登录

**演示话术：**
> "首先是用户登录功能。我们采用了 Magic Link 技术，用户只需输入邮箱，就能收到一个登录链接。这种方式比传统密码登录更安全，因为不存在密码泄露的风险。而且用户体验也更好，不需要记住密码。"

---

### 2.2 仪表盘（Dashboard）

**演示内容：**
- 显示用户昵称和欢迎语
- 今日任务快速概览（已完成/总数）
- 今日日记预览卡片
- 数据统计卡片（连续打卡天数、总任务数等）
- 快捷入口按钮（今日视图、归档、统计）

**演示话术：**
> "登录后首先看到的是仪表盘。这里集中展示了今天的任务概况、日记摘要和关键统计数据。用户可以一目了然地了解今天的进度，也可以快速跳转到各个功能模块。"

**技术亮点：**
- 数据汇总展示
- 卡片式布局，信息层次清晰
- 支持骨架屏加载动画

---

### 2.3 今日视图（核心功能）

#### 2.3.1 任务管理

**演示步骤：**
1. 点击"添加任务"按钮
2. 输入任务描述："完成项目文档"
3. 设置优先级为"高"
4. 添加标签："学习"
5. 点击确认，任务出现在列表中
6. 勾选任务复选框，标记为完成
7. 查看完成率自动更新
8. 演示拖拽排序功能

**演示话术：**
> "任务管理是核心功能之一。用户可以添加任务，设置优先级（高中低三级），还能打上标签方便分类。任务支持拖拽排序，非常灵活。当完成任务时，只需勾选复选框，系统会自动记录完成时间，并更新今日完成率。"

**技术亮点：**
- 实时完成率计算（src/stores/daily.ts:122-129）
- 拖拽排序基于 vuedraggable
- 任务数据包含优先级、标签、时间戳
- 支持批量操作优化性能

#### 2.3.2 日记本

**演示步骤：**
1. 点击"添加日记"按钮
2. 使用富文本编辑器输入内容
3. 演示格式化工具：
   - 加粗、斜体、删除线
   - 有序列表、无序列表
   - 引用块、代码块
4. 选择心情（例如：开心）
5. 保存日记条目
6. 添加第二条日记，展示多条目模式
7. 演示编辑和删除日记条目

**演示话术：**
> "日记本功能支持富文本编辑，用户可以像在 Word 里一样进行格式化。我们采用了 Tiptap 编辑器，它非常强大且易用。最特别的是，我们设计了'多条目日记'模式，一天可以记录多次，每条都带独立的时间戳和心情标签。这样更符合真实的记录场景。"

**技术亮点：**
- 基于 Tiptap 的富文本编辑器
- 多条目日记系统（src/stores/daily.ts:337-437）
- 自动数据迁移：旧版单条日记自动升级为多条目格式
- 心情选择器（5种心情类型）

#### 2.3.3 封存功能

**演示步骤：**
1. 确保至少完成一个任务或写了一条日记
2. 点击"封存今日"按钮
3. 系统提示封存成功
4. 展示封存后所有内容变为只读
5. 演示解封功能

**演示话术：**
> "当完成今天的任务或写完日记后，用户可以点击'封存'按钮。封存后，这一天的记录就像时间胶囊一样被永久保存，无法再修改。这个设计是为了让用户尊重当下的记录，不要事后篡改。当然，如果确实需要修改，也可以选择解封。"

**技术亮点：**
- 封存条件验证（src/stores/daily.ts:131-152）
  - 有任务时：所有任务完成 OR 日记≥50字 OR 有日记条目
  - 无任务时：有日记内容 OR 选择了心情 OR 有日记条目
- 封存后添加时间戳
- 状态持久化到数据库

---

### 2.4 番茄钟

**演示步骤：**
1. 进入番茄钟页面
2. 从任务列表中选择一个任务
3. 点击"开始专注"
4. 展示计时器倒计时（25分钟）
5. 可以暂停/恢复
6. 完成后自动进入休息时间（5分钟）
7. 查看今日专注统计

**演示话术：**
> "番茄钟功能帮助用户集中注意力。标准设置是25分钟专注+5分钟休息，用户也可以自定义时长。最棒的是，可以关联具体任务，这样就能知道每个任务花了多少时间。每次专注完成后，系统会自动记录到数据库，方便后续统计分析。"

**技术亮点：**
- 标准番茄工作法（25+5分钟）
- 可自定义时长（1-60分钟）
- 关联任务专注
- 专注记录持久化（focus_records 表）
- 状态管理：空闲/专注/休息/暂停

---

### 2.5 归档与搜索

**演示步骤：**
1. 进入归档页面，展示所有已封存记录
2. 使用搜索框输入关键词
3. 使用筛选器：
   - 按日期范围筛选
   - 按心情筛选
   - 按标签筛选
4. 点击某条归档记录，查看详情
5. 在详情页演示查看完整内容

**演示话术：**
> "归档页面是所有封存记录的集合，可以看作是你的人生时间线。我们提供了强大的搜索和筛选功能，可以按关键词、日期、心情、标签多维度查找。点击任何一条记录，就能看到那天的完整内容，回顾过往的点滴。"

**技术亮点：**
- 多维度搜索（关键词、日期、心情、标签）
- 虚拟滚动优化长列表性能
- 卡片流布局
- 支持从归档详情页解封记录

---

### 2.6 数据统计

**演示步骤：**
1. 进入统计页面
2. 展示任务完成率趋势图（ECharts 折线图）
3. 展示心情分布饼图
4. 展示标签使用统计
5. 展示连续打卡天数

**演示话术：**
> "数据统计页面是对个人成长的量化展示。通过折线图可以看到任务完成率的变化趋势，通过饼图了解自己的心情分布。还有标签使用统计，帮助了解时间分配。这些数据能帮助用户更好地认识自己。"

**技术亮点：**
- 使用 ECharts 实现数据可视化
- 动态计算统计指标
- 支持日期范围筛选
- 连续打卡算法

---

### 2.7 个人中心

**演示步骤：**
1. 进入个人中心
2. 展示手帐风格的个人资料页
3. 点击头像上传新头像
4. 修改昵称
5. 查看账户统计徽章
6. 演示主题切换（深色/浅色）

**演示话术：**
> "个人中心采用了手帐风格设计，有胶带装饰和贴纸元素，让页面更温馨。用户可以上传头像、修改昵称。页面上还展示了一些成就徽章，比如总任务数、连续打卡天数等。右上角可以切换深色和浅色主题。"

**技术亮点：**
- 头像上传到 Supabase Storage
- 文件格式验证（JPG/PNG）
- 文件大小限制（5MB）
- 手帐风格 UI 组件（胶带、贴纸）
- 主题切换（localStorage 持久化）

---

### 2.8 日记本书架

**演示步骤：**
1. 进入日记本书架页面
2. 展示按月份归档的日记本卡片
3. 点击某个月份，查看该月所有记录
4. 演示书架视觉化呈现

**演示话术：**
> "日记本书架是一个特色功能，它把你的记录按月份整理成一本本'书'。点击某本书就能查看那个月的所有内容。这种视觉化的呈现方式让浏览历史记录变得更有仪式感。"

**技术亮点：**
- 按月份聚合数据
- 书架式卡片布局
- 视觉化设计

---

## 三、技术架构讲解

### 3.1 整体架构

```
┌─────────────────────────────────────────┐
│           用户界面层 (Views)              │
│    8个页面视图 (LoginView, HomeView...)   │
└─────────────────┬───────────────────────┘
                  │
┌─────────────────┴───────────────────────┐
│          组件层 (Components)             │
│    47个可复用组件 (按功能模块组织)         │
└─────────────────┬───────────────────────┘
                  │
┌─────────────────┴───────────────────────┐
│      状态管理层 (Pinia Stores)           │
│  6个Store: auth, daily, archive,        │
│           profile, pomodoro, settings    │
└─────────────────┬───────────────────────┘
                  │
┌─────────────────┴───────────────────────┐
│        服务层 (Services)                 │
│  14个Service: database, auth, journal... │
└─────────────────┬───────────────────────┘
                  │
┌─────────────────┴───────────────────────┐
│      数据持久化层 (Supabase)              │
│  PostgreSQL + Auth + Storage             │
└─────────────────────────────────────────┘
```

**演示话术：**
> "从技术架构来看，我们采用了清晰的分层设计。最上层是用户界面，中间是组件层和状态管理层，下面是服务层，最底层是 Supabase 数据库。这种分层设计让代码职责清晰，易于维护和扩展。"

### 3.2 核心技术栈

| 层级 | 技术选型 | 说明 |
|-----|---------|------|
| 前端框架 | Vue 3 | 使用 Composition API，代码更简洁 |
| 类型系统 | TypeScript | 类型安全，减少运行时错误 |
| 构建工具 | Vite | 快速的开发体验，HMR 秒级更新 |
| 状态管理 | Pinia | 轻量级，支持 TypeScript，API 简洁 |
| 路由管理 | Vue Router | SPA 页面切换，支持路由守卫 |
| 样式预处理 | SCSS | 支持变量、嵌套、混入 |
| 富文本编辑 | Tiptap | 强大且易扩展的编辑器 |
| 数据可视化 | ECharts | 专业的图表库 |
| 后端服务 | Supabase | BaaS，提供数据库+认证+存储 |
| 数据库 | PostgreSQL | 关系型数据库，由 Supabase 提供 |
| 部署平台 | Vercel | 自动化部署，全球 CDN |

### 3.3 数据库设计

**表结构设计：**

```sql
-- 1. 每日记录表
daily_records (
  id UUID PRIMARY KEY,  -- 日期格式：YYYY-MM-DD
  date DATE,
  journal TEXT,  -- 旧字段，保留兼容
  mood TEXT,  -- 旧字段，保留兼容
  is_sealed BOOLEAN,
  completion_rate INTEGER,
  created_at TIMESTAMPTZ,
  sealed_at TIMESTAMPTZ,
  user_id UUID REFERENCES auth.users
)

-- 2. 任务表
tasks (
  id UUID PRIMARY KEY,
  record_id UUID REFERENCES daily_records,
  description TEXT,
  completed BOOLEAN,
  priority TEXT,  -- high/medium/low
  tags TEXT[],
  sort_order INTEGER,
  created_at TIMESTAMPTZ,
  completed_at TIMESTAMPTZ,
  user_id UUID REFERENCES auth.users
)

-- 3. 日记条目表
journal_entries (
  id UUID PRIMARY KEY,
  record_id UUID REFERENCES daily_records,
  content TEXT,
  mood TEXT,  -- 可选
  created_at TIMESTAMPTZ,
  user_id UUID REFERENCES auth.users
)

-- 4. 用户资料表
user_profiles (
  id UUID PRIMARY KEY REFERENCES auth.users,
  nickname TEXT,
  avatar_url TEXT,
  created_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ
)

-- 5. 专注记录表
focus_records (
  id UUID PRIMARY KEY,
  task_id UUID,  -- 可空
  task_description TEXT,  -- 可空
  duration INTEGER,  -- 分钟
  completed_at TIMESTAMPTZ,
  date DATE,
  user_id UUID REFERENCES auth.users
)
```

**演示话术：**
> "数据库设计上，我们有5张核心业务表。每日记录表是主表，任务表和日记条目表通过外键关联。所有表都包含 user_id 字段，确保数据隔离。我们还启用了 Row Level Security（RLS）策略，在数据库层面确保用户只能访问自己的数据。"

### 3.4 安全机制

**Row Level Security (RLS) 策略：**

```sql
-- 示例：daily_records 表的 RLS 策略
CREATE POLICY "用户只能查看自己的记录"
  ON daily_records FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "用户只能创建自己的记录"
  ON daily_records FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "用户只能更新自己的记录"
  ON daily_records FOR UPDATE
  USING (auth.uid() = user_id);
```

**演示话术：**
> "安全性是我们非常重视的方面。我们使用了 Supabase 的 Row Level Security 功能，在数据库层面就限制了用户只能访问自己的数据。即使有人获得了 API 密钥，也无法访问其他用户的数据。这是一个非常强大的安全机制。"

---

## 四、项目亮点总结

### 4.1 功能创新

1. **多条目日记系统**：突破传统"一天一条日记"的限制，支持多次记录
2. **封存机制**：时间胶囊概念，尊重当下记录
3. **任务关联专注**：番茄钟与任务深度绑定
4. **手帐风格设计**：温馨的视觉体验

### 4.2 技术优势

1. **现代化技术栈**：Vue 3 + TypeScript + Vite
2. **无服务器架构**：Supabase BaaS，降低运维成本
3. **数据安全**：RLS 策略 + 用户认证
4. **性能优化**：虚拟滚动、批量操作、自动保存
5. **完善测试**：30+ 个测试文件，覆盖核心逻辑

### 4.3 用户体验

1. **响应式设计**：桌面和移动端都有良好体验
2. **骨架屏加载**：减少感知等待时间
3. **流畅动画**：页面过渡和微交互
4. **深色模式**：支持主题切换
5. **Magic Link**：无密码登录，安全便捷

### 4.4 工程实践

1. **分层架构**：View → Store → Service → Database
2. **类型安全**：TypeScript 全面覆盖
3. **代码规范**：ESLint + Prettier
4. **模块化**：47个可复用组件
5. **测试驱动**：Vitest 单元测试

---

## 五、演示注意事项

### 5.1 演示前准备

- [ ] 确保网络连接正常（需要访问 Supabase）
- [ ] 准备演示账号，提前录入一些示例数据
- [ ] 检查浏览器（推荐 Chrome 或 Edge）
- [ ] 准备好代码编辑器（展示关键代码片段）
- [ ] 测试所有功能是否正常运行

### 5.2 演示顺序建议

1. **登录流程**（1分钟）：展示 Magic Link 登录
2. **仪表盘**（30秒）：快速浏览整体布局
3. **今日视图**（3分钟）：重点演示任务+日记+封存
4. **番茄钟**（1分钟）：演示专注计时
5. **归档搜索**（1分钟）：展示历史记录浏览
6. **数据统计**（1分钟）：展示图表可视化
7. **个人中心**（30秒）：展示资料管理和主题切换
8. **技术架构**（2分钟）：讲解技术选型和数据库设计
9. **总结亮点**（1分钟）：回顾功能和技术优势

**总时长：约 10-12 分钟**

### 5.3 可能的提问及回答

**Q1：为什么选择 Vue 3 而不是 React？**
> A：Vue 3 的 Composition API 写法简洁，学习曲线平缓，适合中小型项目快速开发。而且 Vue 的响应式系统非常直观，代码可读性好。

**Q2：为什么使用 Supabase 而不是自己搭建后端？**
> A：Supabase 是一个成熟的 BaaS 平台，提供了数据库、认证、存储等功能，可以大大加快开发速度。而且它是开源的，不用担心厂商锁定。对于学习项目来说，可以让我们专注于业务逻辑和前端实现，不用花太多时间在后端运维上。

**Q3：如何保证数据安全？**
> A：我们采用了多层安全措施：1) Supabase Auth 管理用户认证；2) 所有表都启用了 Row Level Security，在数据库层面限制用户只能访问自己的数据；3) 头像上传有文件格式和大小限制；4) 环境变量单独配置，API 密钥不会泄露到前端代码。

**Q4：封存功能的业务逻辑是什么？**
> A：封存条件分两种情况：如果有任务，要么所有任务完成，要么日记达到50字，要么有日记条目；如果没有任务，只要有日记内容、选择了心情或有日记条目就可以封存。封存后记录变为只读，但用户可以选择解封。代码位于 src/stores/daily.ts:131-152。

**Q5：多条目日记是如何实现的？**
> A：我们设计了独立的 journal_entries 表，每条日记都是一个独立记录，关联到 daily_records 表。为了兼容旧版本，我们还保留了 journal 字段，并实现了自动数据迁移逻辑（src/stores/daily.ts:69-91）。这样旧数据会自动升级为新格式。

**Q6：性能优化做了哪些工作？**
> A：主要有三点：1) 归档列表使用虚拟滚动技术，只渲染可见区域的条目；2) 任务批量更新接口，一次操作多个任务；3) 日记自动保存采用防抖技术，避免频繁请求数据库。

**Q7：如果要扩展功能，应该如何设计？**
> A：得益于分层架构，扩展很容易。比如要添加"任务提醒"功能：1) 在 types/index.ts 定义 Reminder 接口；2) 创建 services/reminder.ts 处理提醒逻辑；3) 在 stores/daily.ts 添加 reminder 相关的 actions；4) 创建 ReminderSettings 组件；5) 在数据库添加 reminders 表。各层职责清晰，不会互相影响。

---

## 六、演示脚本示例

### 开场白（30秒）

> "老师好，今天我要演示的项目是'行动手帐'，一个基于 Vue 3 和 Supabase 的现代化 Web 应用。这个项目融合了任务管理、日记记录和番茄钟功能，帮助用户高效管理时间并记录生活。接下来我将从功能演示和技术实现两个方面进行讲解。"

### 功能演示（8分钟）

> "首先看登录功能。我们使用了 Magic Link 技术，用户输入邮箱后，会收到一个登录链接，点击即可登录，无需记住密码..."
>
> "登录后进入仪表盘，这里可以看到今天的任务概况、日记摘要和关键统计数据..."
>
> "点击进入今日视图，这是核心功能区域。我先添加一个任务'完成项目文档'，设置优先级为高，打上'学习'标签。任务添加后，可以通过拖拽调整顺序，勾选复选框标记完成，右侧会实时显示完成率..."
>
> "日记功能支持富文本编辑，我可以加粗、添加列表、插入引用。特别的是，我们支持一天写多条日记，每条都有独立的时间戳和心情选择..."
>
> "当完成任务或写完日记后，可以点击'封存今日'。封存后，这一天的内容就变成只读了，像时间胶囊一样被永久保存..."
>
> "番茄钟功能可以关联具体任务。我选择刚才添加的任务，点击开始，进入25分钟专注模式。完成后会自动进入5分钟休息时间，并把这次专注记录保存下来..."
>
> "归档页面展示所有已封存的记录。可以按关键词、日期、心情、标签多维度搜索。点击任意一条，就能看到那天的完整内容..."
>
> "统计页面用图表展示了任务完成趋势、心情分布等数据，帮助我们更好地了解自己的状态..."

### 技术讲解（3分钟）

> "技术架构方面，我们采用了分层设计：视图层、组件层、状态管理层、服务层和数据持久化层。前端使用 Vue 3 + TypeScript + Vite，状态管理用 Pinia，后端采用 Supabase BaaS..."
>
> "数据库设计上，有5张核心表：每日记录表、任务表、日记条目表、用户资料表和专注记录表。所有表都关联 user_id，并启用了 Row Level Security 策略，确保数据安全..."
>
> "项目的亮点包括：多条目日记系统、封存机制、任务关联专注、手帐风格设计，以及完善的测试覆盖。我们还做了虚拟滚动、批量操作等性能优化..."

### 结束语（30秒）

> "以上就是我的项目演示。这个项目不仅实现了完整的业务功能，还在技术架构、代码质量和用户体验上做了很多思考。感谢老师的聆听，我的演示完毕，请老师提问。"

---

## 七、展示代码的关键位置

如果老师要求展示代码，可以打开以下文件：

### 7.1 类型定义
**文件**：`src/types/index.ts`
**展示内容**：完整的 TypeScript 类型定义，包括 Task、DailyRecord、JournalEntry 等

### 7.2 状态管理
**文件**：`src/stores/daily.ts`
**展示内容**：
- 完成率计算逻辑（122-129行）
- 封存条件判断（131-152行）
- 多条目日记管理（337-437行）
- 数据迁移逻辑（69-91行）

### 7.3 数据库操作
**文件**：`src/services/database.ts`
**展示内容**：
- 保存记录逻辑（89-207行）
- 用户数据隔离（通过 user_id 过滤）
- RLS 安全机制

### 7.4 富文本编辑器
**文件**：`src/composables/useRichTextEditor.ts`
**展示内容**：Tiptap 编辑器的配置和初始化

### 7.5 路由配置
**文件**：`src/router/index.ts`
**展示内容**：路由定义和认证守卫

---

## 八、备用演示方案

**如果网络环境不佳或 Supabase 连接失败：**

1. **使用本地存储模式**：项目有 localStorage 降级方案，可以在本地演示
2. **展示录屏视频**：提前录制功能演示视频作为备份
3. **展示测试用例**：通过运行测试展示功能逻辑
4. **展示代码逻辑**：重点讲解代码实现而非功能演示

---

## 九、评分标准对照

根据课程设计考查标准，项目覆盖的评分点：

| 评分项 | 对应功能/技术 | 分值参考 |
|--------|--------------|---------|
| 功能完整性 | 任务管理、日记、番茄钟、统计、归档 | 30分 |
| 技术应用 | Vue 3、TypeScript、Supabase、ECharts | 25分 |
| 界面设计 | 玻璃拟态设计、响应式布局、主题切换 | 15分 |
| 代码质量 | 分层架构、类型安全、测试覆盖 | 15分 |
| 创新性 | 多条目日记、封存机制、手帐风格 | 10分 |
| 演示效果 | 流畅演示、清晰讲解、问答能力 | 5分 |

**项目优势：**
- 功能完整且有创新点
- 技术栈现代化
- 代码质量高（有单元测试）
- UI 设计精美
- 有实际应用价值

---

**祝演示顺利！**
